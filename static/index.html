<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">
    <head>
        <title>MongoDbWebAdmin</title>
        <script src="//code.jquery.com/jquery-2.1.1.js"></script>
        <script src="//mozilla.github.io/nunjucks/files/nunjucks.js"></script>
        <script src="/static/scripts.js"></script>
        <link type="text/css" rel="stylesheet" href="/static/styles.css"/>
    </head>
    <body>
        <div class="template" id="object_template">
            {% macro render_object(object, isa, root = true) %}
                {% if root %} <div class="indented"> {% endif %}
                {% if isa(object, 'null') %}    
                    <span>
                        {{ object }}
                    </span>
                {% elif isa(object, 'boolean') %}
                    <span>
                        {{ object }}
                    </span>
                {% elif isa(object, 'number') %}    
                    <span>
                        {{ object }}
                    </span>
                {% elif isa(object, 'string') %}    
                    <span>
                        {{ '"' + object + '"' }}
                    </span>
                {% elif isa(object, 'array') %}
                    {% if root %} <span> {% else %} <span class="rollable" status="rolledup"> {% endif %}
                        <span class="header">[</span>
                        {% for item in object %}
                            <div class="indented">
                                {{ render_object(item, isa, false) }}
                                {% if not loop.last -%}
                                    <span>,</span>
                                {% endif %}
                            </div>
                        {% endfor %}
                        <span class="footer">]</span>
                    </span>
                {% elif isa(object, 'object') %}
                    {% if root %} <span> {% else %} <span class="rollable" status="rolledup"> {% endif %}
                        <span class="header">{</span>
                        {% for key, value in object %}
                            <div class="indented">
                                <span>{{ render_object(key, isa, false) }}</span>
                                <span>:</span>
                                <span>{{ render_object(value, isa, false) }}</span>
                                {% if not loop.last %}
                                    <span>,</span>
                                {% endif %}
                            </div>
                        {% endfor %}
                        <span class="footer">}</span>
                    </span>
                {% endif %}
                {% if root %} </div> {% endif %}
            {% endmacro %}
            {{ render_object(object, isa) }}
        </div>
        <div class="template" id="documents_template">
            {% for id in ids %}
                <div class="rollable indented document" status="unloaded">
                    <span class="header id">{{ id }}</span>
                    <!-- object -->
                </div>
            {% endfor %}
        </div>
        <div class="template" id="collections_template">
            {% for name in names %}
                <div class="rollable indented collection" status="unloaded">
                    <span class="header name">{{ name }}</span>
                    <!-- documents -->
                </div>
            {% endfor %}
        </div>
        <div class="template" id="databases_template">
            {% for name in names %}
                <div class="rollable indented database" status="unloaded">
                    <span class="header name">{{ name }}</span>
                    <!-- collections -->
                </div>
            {% endfor %}
        </div>
        <h1>Mongo db web admin</h1>
        <div id="content">
            <!-- databases -->
        </div>
    </body>
</html>
